\begin{tikzpicture}
    \node[ellipse,very thick,draw=black] (peera) at (5,1) {Peer A};
    \node[rectangle,draw=black,fill=yellow!50,anchor=north,minimum size=1.5em] (peera-piece3) at ($(peera.south)$) {3};
    \node[rectangle,draw=black,fill=orange!70,anchor=east,minimum size=1.5em] (peera-piece2) at ($(peera-piece3.west)$) {2};
    \node[rectangle,draw=black,fill=red!50,anchor=east,minimum size=1.5em] (peera-piece1) at ($(peera-piece2.west)$) {1};
    \node[rectangle,draw=black,fill=green!50,anchor=west,minimum size=1.5em] (peera-piece4) at ($(peera-piece3.east)$) {4};
    \node[rectangle,draw=black,fill=cyan!50,anchor=west,minimum size=1.5em] (peera-piece5) at ($(peera-piece4.east)$) {5};

    \node[ellipse,very thick,draw=black] (peerb) at (5,-1) {Peer B};
    \node[rectangle,draw=black,anchor=north,minimum size=1.5em] (peerb-piece3) at ($(peerb.south)$) {\phantom{3}};
    \node[rectangle,draw=black,anchor=east,minimum size=1.5em] (peerb-piece2) at ($(peerb-piece3.west)$) {\phantom{2}};
    \node[rectangle,draw=black,anchor=east,minimum size=1.5em] (peerb-piece1) at ($(peerb-piece2.west)$) {\phantom{1}};
    \node[rectangle,draw=black,anchor=west,minimum size=1.5em] (peerb-piece4) at ($(peerb-piece3.east)$) {\phantom{4}};
    \node[rectangle,draw=black,fill=cyan!50,anchor=west,minimum size=1.5em] (peerb-piece5) at ($(peerb-piece4.east)$) {5};

    \node[circle,very thick,draw=black] (us) at (0,0) {Us};
    \node[rectangle,draw=black,fill=yellow!50,anchor=north,minimum size=1.5em] (us-piece3) at ($(us.south)$) {3};
    \node[rectangle,draw=black,fill=orange!70,anchor=east,minimum size=1.5em] (us-piece2) at ($(us-piece3.west)$) {2};
    \node[rectangle,draw=black,fill=red!50,anchor=east,minimum size=1.5em] (us-piece1) at ($(us-piece2.west)$) {1};
    \node[rectangle,draw=black,fill=green!50,anchor=west,minimum size=1.5em] (us-piece4) at ($(us-piece3.east)$) {4};
    \node[rectangle,draw=black,fill=cyan!50,anchor=west,minimum size=1.5em] (us-piece5) at ($(us-piece4.east)$) {5};

    \draw ($(us.east)$) -- ($(peerb.west)$) node [pos=0.6,sloped,above=2pt,rectangle,draw=black,fill=green!50,minimum size=1.5em] (movingpieceb) {4};
    \coordinate (peerboffset) at ($(us.east) - (peerb.west)$);
    \coordinate (startoffsetb) at ($0.04*(peerboffset)$);
    \draw [gray] ($(movingpieceb.north west)!.75!(movingpieceb.south west) + (startoffsetb)$) -- ($(movingpieceb.north west)!.75!(movingpieceb.south west) + 0.1*(peerboffset)$);
    \draw [gray] ($(movingpieceb.west) + (startoffsetb)$) -- ($(movingpieceb.west) + 0.15*(peerboffset)$);
    \draw [gray] ($(movingpieceb.north west)!.25!(movingpieceb.south west) + (startoffsetb)$) -- ($(movingpieceb.north west)!.25!(movingpieceb.south west) + 0.2*(peerboffset)$);
\end{tikzpicture}
